<meta charset="UTF-8">

## Вступление

Игровой demo-сервер доступен так же в интернете 24/7 в целях
ознакомления [http://codenjoy.com/codenjoy-contest](http://codenjoy.com/codenjoy-contest).

Игра с открытым исходным кодом. Для реализации своей игры, исправления
ошибок в текущей и внесения других правок необходимо для начала
[форкнуть проект](https://github.com/codenjoyme/codenjoy.git).
В корне репозитория есть описание в файле Readme.md - там описано, что делать дальше.

По возникающим вопросам, пиши в [skype alexander.baglay](skype:alexander.baglay)
или на почту [apofig@gmail.com](mailto:apofig@gmail.com).

## В чем суть игры?

Надо написать своего бота, который обыграет бота соперника
по очкам. Участники объединяются по двое. Каждая пара играет на своем поле.
В случае победы или поражения пара начинает новую игру в том же составе.

Есть два цвета: черный и белый. Белый ходит первым. Ходы делаются по очереди -
один из тиков белому, следующий тик - черному.
Когда ходит соперник - ваши команды игнорируются и наоборот.

Очки начисляются за победу в партии. Очки суммируются от игры к игре.

Побеждает игрок с большим числом очков (до условленного времени).

## Подключение к серверу

Итак, игрок [регистрируется на сервере](../../../register?gameName=reversi),
указывая свой email.

Далее необходимо подключиться из кода к серверу через websocket.
[Эта подборка](https://github.com/codenjoyme/codenjoy-clients.git)
клиентов для разных языков программирования тебе поможет в твоей игре.
Как запустить клиент смотри в корне проекта в файле README.md.

Если ты не можешь найти свой язык - придется написать свой клиент
(а после пошарить с нами на почту [apofig@gmail.com](mailto:apofig@gmail.com))

Адрес для подключения к игре на сервере выглядит так (ты можешь скопировать его
из игровой комнаты):

`https://[server]/codenjoy-contest/board/player/[user]?code=[code]`

Тут `[server]` - домен или ip-адрес игрового сервера, `[user]` - id игрока, a `[code]` -
твой security token. Убедись что код хранится в тайне, иначе любой участник
сможет играть от твоего имени.

В коде твоего клиента тебе нужно найти похожую строчку и заменить её твоим URL -
тем самым, ты задаёшь логин/пароль для доступа к серверу.
Затем запусти твой клиент и убедись, что сервер получает команды твоего клиента.
После этого можно приступать к работе над логикой бота.

После подключения клиент будет регулярно (каждую секунду) получать строку
символов с закодированным состоянием поля. Формат таков:

`^board=(.*)$`

с помощью этого regexp можно выкусить строку доски.
Вот пример строки от сервера:

<pre>board=XXXX     XooXXX XXoXXooo X Xo     XoX     XoXXX    o o          </pre>

Длинна строки равна площади поля `N*N`. Если вставить символ 
переноса строки каждые `N=sqrt(length(string))` символов, то 
получится читабельное изображение поля.

<pre>XXXX
XooXXX
XXoXXooo
X Xo
XoX
XoXXX
o o  </pre>

Первый символ строки соответствует ячейке расположенной в 
левом верхнем углу и имеет координату `[0, 6]`. 
В этом примере — в ячейке `[3, 2]` находится белая фишка (символ `o`).

## Расшифровка символов

Расшифровку символов ты можешь [найти тут](elements.md).

## Как играть?

Игра пошаговая, каждую секунду сервер посылает твоему клиенту
состояние обновленного поля на текущий момент и ожидает ответа куда расположить фишку.
За следующую секунду игрок должен успеть дать команду.
Если не успел — ход пропускается и в следующую секунду ходит соперник.
Если пропустить пару ходов, очень вероятно что пропускающий ход проиграет.

Твоя цель расcтавлять фишки в соответствии с задуманным тобой алгоритмом.
Игрок на поле должен уметь зарабатывать так много очков, как только сможет.
Основная цель игры - обыграть по очкам всех соперников.

## Команды управления

Команда одна: `ACT(<X>,<Y>)` – приводит к установке фишки на заданное место на поле,
в случае если туда можно походить.

Делая ход, игрок должен поставить свою фишку на одну из клеток доски таким образом,
чтобы между этой поставленной фишкой и одной из имеющихся уже на доске фишек
его цвета находился непрерывный ряд фишек соперника, горизонтальный,
вертикальный или диагональный (другими словами, чтобы непрерывный ряд фишек
соперника оказался «закрыт» фишками игрока с двух сторон). Все фишки соперника,
входящие в «закрытый» на этом ходу ряд, переворачиваются на другую сторону
(меняют цвет) и переходят к ходившему игроку.

Если в результате одного хода «закрывается» одновременно более одного ряда
фишек противника, то переворачиваются все фишки, оказавшиеся на всех
«закрытых» рядах.

Игрок вправе выбирать любой из возможных для него ходов. Если игрок имеет
возможные ходы, он не может отказаться от хода. Если игрок не имеет
допустимых ходов, то ход передаётся сопернику.

Игра прекращается, когда на доску выставлены все фишки или когда ни один
из игроков не может сделать хода. По окончании игры проводится подсчёт
фишек каждого цвета, и игрок, чьих фишек на доске выставлено больше,
объявляется победителем. В случае равенства количества фишек засчитывается
ничья.

Более детальнее читай правила <a href="https://ru.wikipedia.org/wiki/%D0%A0%D0%B5%D0%B2%D0%B5%D1%80%D1%81%D0%B8">на Википедии</a>

Первостепенная задача – написать websocket клиента, который подключится к серверу.
Затем заставить героя слушаться команды. Таким образом, игрок подготовится
к основной игре. Основная задача – вести осмысленную игру и победить.